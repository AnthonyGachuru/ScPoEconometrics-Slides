What does that mean? Let's remind oursevles of the euler Equation:
library(EconData)
help(package="EconData")
f <- function(x) {x}
f(3)
lambda1
knitr::opts_chunk$set(echo = TRUE)
# define a model
m1 <- list(A1=1000,
r=0.05,
w=c(5,10),
L=8700,
alpha=0.3,
beta=0.9)
# define our model solution
lambda <- function(m){
r = (1+m$beta+m$alpha*m$beta^2)/(m$A1+m$w[1]*m$L+m$w[2]*m$L/(1+m$r))
return(r)
}
c1 <- function(m,lamb){
m$alpha / lamb
}
c2 <- function(m,lamb){
((1+m$r)*m$beta*m$alpha)/lamb
}
c3 <- function(m,lamb){
(((1+m$r)^2)*(m$beta^2)*m$alpha)/lamb
}
l1 <- function(m,lamb){(1-m$alpha)/(m$w[1] * lamb)}
l2 <- function(m,lamb){m$beta*(1+m$r)*(1-m$alpha)/(m$w[2] * lamb)}
hours <- function(m,leisure){
m$L - leisure
}
# print to a table
lambda1 = lambda(m1)
df = data.frame(period = 1:3,cons = c(c1(m1,lambda1),
c2(m1,lambda1),
c3(m1,lambda1)),
leisure = c(l1(m1,lambda1),
l2(m1,lambda1),
m1$L))
df$hours = m1$L - df$leisure
df
lambda1
h1_w1 = ((1-m1$alpha)*m1$A1 + m1$w[2]*m1$L / (1+m1$r)) / m1$w[1]^2
h1_A1 = - (1-m1$alpha ) / (m1$w[1] *(1+m1$beta+(m1$beta^2)*m1$alpha))
h1_w1
h1_A1
((1-m1$alpha)*m1$A1 + m1$w[2]*m1$L )
m1$w[1]^2
h1_w1 = ((1-m1$alpha)*(m1$A1 + m1$w[2]*m1$L) ) / (m1$w[1]^2 *(1+m1$beta+(m1$beta^2)*m1$alpha))
h1_A1 = - (1-m1$alpha ) / (m1$w[1] *(1+m1$beta+(m1$beta^2)*m1$alpha))
hicks = h1_w1 - h1_A1 * df[1,]$hours
hicks
df[1,]$hours
h1_A1
h1_w1 = ((1-m1$alpha)*(m1$A1 + m1$w[2]*m1$L) ) / (m1$w[1]^2 *(1+m1$beta+(m1$beta^2)*m1$alpha)*(1+m1$r))
h1_A1 = - (1-m1$alpha ) / (m1$w[1] *(1+m1$beta+(m1$beta^2)*m1$alpha))
hicks = h1_w1 - h1_A1 * df[1,]$hours
hicks
h1_w1 = ((1-m1$alpha)*m1$A1 ) / (m1$w[1]^2 *(1+m1$beta+(m1$beta^2)*m1$alpha)) + ((1-m1$alpha)*m1$w[2]*m1$L ) / (m1$w[1]^2 *(1+m1$beta+(m1$beta^2)*m1$alpha)*(1+m1$r))
h1_A1 = - (1-m1$alpha ) / (m1$w[1] *(1+m1$beta+(m1$beta^2)*m1$alpha))
hicks = h1_w1 - h1_A1 * df[1,]$hours
hicks
help(leaflet)
library(leaflet)
sessionInfo()
sessionInfo()
x = readClipboard()
x = readClipBoard()
x <- readClipboard()
library(data.table)
x = fread("~/bettenbestandohnecamping1.csv")
x
x = fread("~/bettenbestandohnecamping1.csv")
x
library(ggplot2)
x[,list(total=sum(Winterbetten)),by=year]
x[,list(total=sum(Winterbetten)),by=year]
x
x[,list(total=sum(Winterbetten)),by=Jahr]
x[,list(total=sum(Winterbetten)),by=Jahr][,qplot(Jahr,total,geom="line")]
x[,list(total=sum(Winterbetten)),by=Jahr][,qplot(Jahr,total,geom="line",title="Gesamt Winter")]
x[,list(total=sum(Winterbetten)),by=Jahr][,qplot(Jahr,total,geom="line")]
x[,list(Winter=sum(Winterbetten),Sommer=sum(Sommerbetten)),by=Jahr]
x[,list(Winter=sum(Winterbetten),Sommer=sum(Sommerbetten)),by=Jahr]
melt(x[,list(Winter=sum(Winterbetten),Sommer=sum(Sommerbetten)),by=Jahr],id.vars="Jahr")
ggplot(melt(x[,list(Winter=sum(Winterbetten),Sommer=sum(Sommerbetten)),by=Jahr],id.vars="Jahr"),aes(x=Jahr,y=value,linetype=variable) + geom_line()
ggplot(melt(x[,list(Winter=sum(Winterbetten),Sommer=sum(Sommerbetten)),by=Jahr],id.vars="Jahr"),aes(x=Jahr,y=value,linetype=variable) ) + geom_line()
x[,list(total=sum(Winterbetten)),by=Jahr]
w=x[,list(total=sum(Winterbetten)),by=Jahr]
s=x[,list(total=sum(Sommerbetten)),by=Jahr]
ggplot(w,aes(Jahr,total)) + geom_line() + ggtitle("Winterbetten")
ggplot(s,aes(Jahr,total)) + geom_line() + ggtitle("Sommerbetten")
> library(extrafont)
> library(ggplot2)
library(extrafont)
library(ggplot2)
ggplot() + geom_point(aes(mpg,wt),data=cars) + theme(text = element_text(size=16,family="xkcd"))
ggplot() + geom_point(aes(mpg,wt),data=mtcars) + theme(text = element_text(size=16,family="xkcd"))
fonts()
download.file("http://simonsoftware.se/other/xkcd.ttf",dest="xkcd.ttf", mode="wb")
system("mkdir ~/.fonts")
system("cp xkcd.ttf  ~/.fonts")
font_import(pattern = "[X/x]kcd", prompt=FALSE)
system("cp xkcd.ttf  ~/Library/Fonts")
font_import(pattern = "[X/x]kcd", prompt=FALSE)
fonts()
fonttable()
loadfonts()
library(xkcd)
resumen <-
structure(list(tonombre = structure(c(1L, 2L, 3L, 11L, 4L, 5L,
8L, 6L, 7L, 9L, 10L, 14L, 12L, 13L, 15L), .Label = c("AndalucÃƒ­a",
"AragÃƒÂ³n", "Asturias", "Canarias", "Cantabria", "C-LaMancha",
"CyLeÃƒÂ³n", "CataluÃƒÂ±a", "Extremadura", "Galicia", "Baleares",
"Madrid", "Murcia", "La Rioja", "Valencia"), class = "factor"),
persons = c(2743706L, 515772L, 364410L, 399963L, 699410L,
212737L, 2847377L, 717874L, 894946L, 371502L, 942277L, 119341L,
2561918L, 493833L, 1661613L), frompersons = c(14266L, 3910L,
3214L, 3283L, 4371L, 1593L, 10912L, 8931L, 9566L, 3231L,
5407L, 940L, 21289L, 3202L, 9939L), topersons = c(10341L,
3805L, 2523L, 4039L, 3911L, 1524L, 12826L, 10897L, 7108L,
2312L, 4522L, 1066L, 26464L, 3529L, 9187L), llegan = c(0.38,
0.74, 0.69, 1.01, 0.56, 0.72, 0.45, 1.52, 0.79, 0.62, 0.48,
0.89, 1.03, 0.71, 0.55), sevan = c(0.52, 0.76, 0.88, 0.82,
0.62, 0.75, 0.38, 1.24, 1.07, 0.87, 0.57, 0.79, 0.83, 0.65,
0.6)), .Names = c("tonombre", "persons", "frompersons", "topersons",
"llegan", "sevan"), row.names = c(NA, -15L), class = "data.frame")
resumenlargo <- melt(resumen[,c("tonombre","llegan","sevan")])
oo <- order(resumen$llegan)
nombreordenados <- (resumen$tonombre)[oo]
nombreordenados
resumenlargo$tonombre <- factor( resumenlargo$tonombre, levels=nombreordenados, ordered=TRUE)
set.seed(130613)
kk <- ggplot() +
geom_bar( aes(y= value, x=tonombre,fill=variable ), data=resumenlargo[resumenlargo$variable=="llegan", ], stat="identity") +
geom_bar(aes(y= (-1)* value, x=tonombre,fill=variable ), data=resumenlargo[resumenlargo$variable=="sevan", ], stat="identity") +
scale_y_continuous(breaks=seq(-1.2,1.5,0.3),labels=abs(seq(-1.2,1.5,0.3))) +
ylab("Movilidad de los asalariados (% sobre asalariados residentes)") +
coord_flip() +
theme_xkcd() + xlab("") +  theme(axis.ticks.y = element_blank(), axis.text.y = element_blank())
kk2 <- kk +
geom_text(aes(x=(tonombre),y=0,label=tonombre), data=resumenlargo,family="xkcd")
lleganespana <- sum(resumen$topersons)*100/ sum(resumen$persons)
sevanespana <- sum(resumen$frompersons)*100/ sum(resumen$persons)
lineaespana1 <-   xkcdline(mapping=aes(xbegin=1-0.5,ybegin=lleganespana,xend=15+0.5, yend=lleganespana, yjitteramount=0.051), data= resumenlargo, linetype=2,mask=FALSE)
lineaespana2 <- xkcdline(mapping=aes(xbegin=1-0.5,ybegin=-lleganespana,xend=15+0.5, yend=-lleganespana), yjitteramount=0.051, data= resumenlargo,linetype=2,mask=FALSE)
kk3 <- kk2  +   xkcdline(mapping=aes(xbegin=as.numeric(tonombre)-0.5,ybegin=-1.24,xend=as.numeric(tonombre)-0.5, yend=1.52, xjitteramount=0.151), data= resumenlargo, size=3,color="white") + lineaespana1 + lineaespana2
kk4 <- kk3 + annotate("text",x=1, y=c(lleganespana,-lleganespana),label="Media de EspaÃƒÂ±a", hjust=c(-0.11,-0.11), vjust=c(-0.1,0.1),family="xkcd",angle=90)
kk5 <- kk4 + scale_fill_discrete(name="",
breaks=c("llegan", "sevan"),
labels=c("Llegan", "Se van")) + theme(legend.justification=c(0,0), legend.position=c(0,0))
xrange <- c(1,15)
yrange <- c(-1.3,1.6)
ratioxy <- diff(xrange)/diff(yrange)
x <- 7
y <-  1.5
scale <- 0.35
mapman  <- aes(x,  y,
scale,
ratioxy,
angleofspine ,
anglerighthumerus,
anglelefthumerus,
anglerightradius,
angleleftradius,
anglerightleg,
angleleftleg,
angleofneck)
n <- 1
set.seed(130613)
datamanflip <- data.frame( x= x,
y= y,
scale = scale ,
ratioxy = ratioxy,
angleofspine = runif(n, -pi/2 -pi/2 - pi/10,-pi/2 -pi/2 + pi/10),
##angleofspine = runif(n, -0 - pi/10,-0 + pi/10),
anglerighthumerus = runif(n, -pi/2-pi/6-pi/10, -pi/2 -pi/6+pi/10),
anglelefthumerus = runif(n, -pi/2-pi/2 - pi/10, -pi/2 -pi/2 + pi/10),
anglerightradius = runif(n, -pi/2-pi/5 - pi/10, -pi/2-pi/5 + pi/10),
angleleftradius = runif(n, -pi/2-pi/5 - pi/10, -pi/2-pi/5 + pi/10),
angleleftleg = runif(n, -pi/2 + 3*pi/2  + pi / 12  -pi/20,-pi/2  +3*pi/2  + pi / 12  +pi/20) ,
anglerightleg =  runif(n, -pi/2 + 3*pi/2  - pi / 12  -pi/20, -pi/2+ 3*pi/2  - pi / 12  +pi/20) ,
angleofneck = runif(n, -pi/2+3*pi/2-pi/10, -pi/2+3*pi/2+pi/10))
p1 <-  xkcdman(mapman , datamanflip)
kk6 <- kk5 + p1
kk7 <- kk6 + annotate("text", x=9.3, y = 1.3, label="Unos vienen, otros se van",family="xkcd" ) +
xkcdline(aes(xbegin=xbegin,xend=xend,yend=yend,ybegin=ybegin), yjitteramount=0.135,data=data.frame(xbegin=9.0, xend=7.2, ybegin=1.2, yend=1.3))
mapping <- aes(x, y, scale, ratioxy, angleofspine,
anglerighthumerus, anglelefthumerus,
anglerightradius, angleleftradius,
anglerightleg, angleleftleg, angleofneck,
linetype=city)
dataman <- data.frame(x= c(15,30), y=c(3, 4),
scale = c(0.3,0.51) ,
ratioxy = ratioxy,
angleofspine =  -pi/2  ,
anglerighthumerus = c(pi/4, -pi/6),
anglelefthumerus = c(pi/2 + pi/4, pi +pi/6),
anglerightradius = c(pi/3, -pi/3),
angleleftradius = c(pi/3, -pi/3),
anglerightleg = 3*pi/2  - pi / 12,
angleleftleg = 3*pi/2  + pi / 12 ,
angleofneck = runif(1, 3*pi/2-pi/10, 3*pi/2+pi/10),
city=c("Liliput","Brobdingnag"))
p <- ggplot() + geom_point(aes(mpg, wt, colour=as.character(vs)), data=mtcars) +
xkcdaxis(xrange,yrange) +
xkcdman(mapping, dataman)
p
xrange <- range(mtcars$mpg)
yrange <- range(mtcars$wt)
set.seed(123) # for reproducibility
p <- ggplot() + geom_point(aes(mpg, wt), data=mtcars) +
xkcdaxis(xrange,yrange)
p
ratioxy <- diff(xrange)/diff(yrange)
mapping <- aes(x, y, scale, ratioxy, angleofspine,
anglerighthumerus, anglelefthumerus,
anglerightradius, angleleftradius,
anglerightleg, angleleftleg, angleofneck,
linetype=city)
dataman <- data.frame(x= c(15,30), y=c(3, 4),
scale = c(0.3,0.51) ,
ratioxy = ratioxy,
angleofspine =  -pi/2  ,
anglerighthumerus = c(pi/4, -pi/6),
anglelefthumerus = c(pi/2 + pi/4, pi +pi/6),
anglerightradius = c(pi/3, -pi/3),
angleleftradius = c(pi/3, -pi/3),
anglerightleg = 3*pi/2  - pi / 12,
angleleftleg = 3*pi/2  + pi / 12 ,
angleofneck = runif(1, 3*pi/2-pi/10, 3*pi/2+pi/10),
city=c("Liliput","Brobdingnag"))
p <- ggplot() + geom_point(aes(mpg, wt, colour=as.character(vs)), data=mtcars) +
xkcdaxis(xrange,yrange) +
xkcdman(mapping, dataman)
p
print("hi")
1+1
x = 1+1
print("hi")
x = 1+1
help(print)
help(plot)
Sys.today()
today()
Sys.Date()
4 + 1
2 - 7
2 * 2
4 / 6
4 + 1
5 - 7
source('~/test.r')
plot(rnorm(10))
y = 3
?log
typeof(y)
c(1, 3, 5, 7, 8, 9)
seq(from = 1.5, to = 2.1, by = 0.001)
c(1, 3, 5, 7, 8, 9)
x = c(1,2,3)
x = 1:3
x
rep(x,times = 3)
help("rep")
rep(x,each = 3)
rep(rep(x,each = 3),times=2)
??length
length(x)
10:0
seq(10,1,by=1)
seq(10,1,by=-1)
source('~/.active-rstudio-document')
View(x)
as.Date(c("2015-04-01", "2015-07-01","2015-09-01","2016-01-01","2016-07-01","2016-12-01"))
dates = c(as.Date(c("2015-04-01", "2015-07-01","2015-09-01","2016-01-01","2016-07-01","2016-12-01")),seq(as.Date("2017-01-01"),as.Date("2018-11-01"),by="1 month"))
dates
plot(dates)
library(ggplot2)
?ggplot
dates = data.frame(Date=c(as.Date(c("2015-04-01", "2015-07-01","2015-09-01","2016-01-01","2016-07-01","2016-12-01")),seq(as.Date("2017-01-01"),as.Date("2018-11-01"),by="1 month")), y = 1)
dates
ggplot(dates,aes(x=Date,y=y)) + geom_point() + theme_bw()
ggplot(dates,aes(x=Date,y=y)) + geom_point() + theme_bw() labs(y="")
ggplot(dates,aes(x=Date,y=y)) + geom_point() + theme_bw()+ labs(y="")
ggplot(dates,aes(x=Date,y=y)) + geom_point() + theme_bw() + theme(legend.position="none")
ggplot(dates,aes(x=Date,y=y)) + geom_point() + theme_bw() + theme( axis.text.y=element_blank(),
axis.ticks.y=element_blank(),
axis.title.y=element_blank())
ggplot(dates,aes(x=Date,y=y)) + geom_point() + theme_bw() + theme(axis.text.y=element_blank(),axis.ticks.y=element_blank(),axis.title.y=element_blank())
ggplot(dates,aes(x=Date,y=y)) + geom_point()+ theme(axis.text.y=element_blank(),axis.ticks.y=element_blank(),axis.title.y=element_blank())
library(Rdna)
bcn = loadclean("Barcelona")
names(bcn)
m = bcn$monthtly
getwd()
library(tidyverse)
library(nycflights13)
airlines
airports
planes
airports %>%
semi_join(flights, c("faa" = "dest"))
airports %>%
semi_join(flights, c("faa" = "dest"))
flights2 <- flights %>%
select(year:day, hour, origin, dest, tailnum, carrier)
names(flights)
?flights
flights %>%
group_by(dest) %>%
summarise(delay = mean(dep_delay)) %>%
semi_join(airports, c("dest" = "faa")) %>%
ggplot(aes(lon,lat)) +
borders("state") + geom_point(aes(size=delay)) + coord_quickmap()
flights %>%
group_by(dest) %>%
summarise(delay = mean(dep_delay)) %>%
semi_join(airports, c("dest" = "faa"))
flights %>%
group_by(dest) %>%
summarise(delay = mean(dep_delay)) %>%
left_join(airports, c("dest" = "faa"))
flights %>%
group_by(dest) %>%
summarise(delay = mean(dep_delay,na.rm=T)) %>%
left_join(airports, c("dest" = "faa"))
flights %>%
group_by(dest) %>%
summarise(delay = mean(dep_delay,na.rm=T)) %>%
left_join(airports, c("dest" = "faa")) %>%
ggplot(aes(lon,lat)) +
borders("state") + geom_point(aes(size=delay)) + coord_quickmap()
flights %>%
group_by(dest) %>%
summarise(delay = mean(dep_delay,na.rm=T)) %>%
left_join(airports, c("dest" = "faa")) %>%
ggplot(aes(lon,lat)) +
borders("state") + geom_point(aes(color=delay)) + coord_quickmap()
library(usethis)
create_package("~/git/RAcookbook")
use_roxygen_md()
use_readme_md()
use_test("my-test")
use_git()
data(cars)
cars
library(readxl)
Layout_ANAA <- read_excel("Dropbox/research/zillow-ztrax/data-dict/Layout_ANAA.xlsx")
View(Layout_ANAA)
dput(Layout_ANAA)
str = dput(Layout_ANAA)
str
str
str %>% filter(Default == 1)
library(dplyr)
str %>% filter(Default == 1)
d = str %>% filter(Default == 1)
for (tab in unique(d$table)){}
d %>% group_by(table) %>% unique(variable)
d
d %>% group_by(table) %>% summarise(unique(variable))
for (tabs in unique(d$table)){
to_load_from_file = subset(d, table == tabs, select = variable)
print(to_load_from_file)
}
for (tabs in unique(d$table)){
to_load_from_file = subset(d, table == tabs, select = variable)
print(paste("load from table",tabs, "variables ",to_load_from_file))
}
for (tabs in unique(d$table)){
to_load_from_file = subset(d, table == tabs, select = variable)
print(paste("load from table",tabs, "variables ",paste(to_load_from_file,collapse = ",")))
}
paste(c("1","2"),collapes = ",")
paste(c("1","2"))
for (tabs in unique(d$table)){
to_load_from_file = subset(d, table == tabs, select = variable)
print(paste("from table",tabs))
print(to_load_from_file)
}
library(xaringan)
xaringan::inf_mr()
xaringan::inf_mr()
getwd()
setwd("git/ScPoEconometrics-slides/chapter1/")
library(xaringan)
xaringan::inf_mr()
servr::daemon_stop(1)
xaringan::inf_mr()
servr::daemon_stop(2)

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>ScPoEconometrics</title>
    <meta charset="utf-8" />
    <meta name="author" content="Florian Oswald" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/5235085b15.js"></script>
    <link rel="stylesheet" href="../css/scpo.css" type="text/css" />
    <link rel="stylesheet" href="../css/scpo-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# ScPoEconometrics
## Session 2
### Florian Oswald
### SciencesPo Paris </br> 2019-08-29

---


layout: true

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/ScPo-shield.png" style="height: 60px;"/&gt;&lt;/div&gt; 

---



# Working With Data


* Econometrics is about Data.

* In these slides we will start to look at this.

* Let's first all load a dataset with this command:
    
    ```r
    data("mpg",package="ggplot2")
    ```

--

* how many observations, how many variables?
    
    ```r
    dim(mpg)
    ```
    
    ```
    ## [1] 234  11
    ```

---

# The `mpg` dataset

* And let's look at the first couple of rows:
    
    ```r
    head(mpg)
    ```
    
    ```
    ##   manufacturer model displ year cyl      trans drv cty hwy fl   class
    ## 1         audi    a4   1.8 1999   4   auto(l5)   f  18  29  p compact
    ## 2         audi    a4   1.8 1999   4 manual(m5)   f  21  29  p compact
    ## 3         audi    a4   2.0 2008   4 manual(m6)   f  20  31  p compact
    ## 4         audi    a4   2.0 2008   4   auto(av)   f  21  30  p compact
    ## 5         audi    a4   2.8 1999   6   auto(l5)   f  16  26  p compact
    ## 6         audi    a4   2.8 1999   6 manual(m5)   f  18  26  p compact
    ```

* `tail` gives you the last rows.

* `names` gives the column names.

---

# The `mpg` dataset: datatypes

* It's important to know how the data is stored.

* We can use `str` for that:


```r
str(mpg)
```

```
## Classes 'tbl_df', 'tbl' and 'data.frame':	234 obs. of  11 variables:
##  $ manufacturer: chr  "audi" "audi" "audi" "audi" ...
##  $ model       : chr  "a4" "a4" "a4" "a4" ...
##  $ displ       : num  1.8 1.8 2 2 2.8 2.8 3.1 1.8 1.8 2 ...
##  $ year        : int  1999 1999 2008 2008 1999 1999 2008 1999 1999 2008 ...
##  $ cyl         : int  4 4 4 4 6 6 6 4 4 4 ...
##  $ trans       : chr  "auto(l5)" "manual(m5)" "manual(m6)" "auto(av)" ...
##  $ drv         : chr  "f" "f" "f" "f" ...
##  $ cty         : int  18 21 20 21 16 18 18 18 16 20 ...
##  $ hwy         : int  29 29 31 30 26 26 27 26 25 28 ...
##  $ fl          : chr  "p" "p" "p" "p" ...
##  $ class       : chr  "compact" "compact" "compact" "compact" ...
```

---

# Summarizing Data


* One can learn only a limited amount from **looking** at a `data.frame`.

--

* Even if you *could* see all rows of the dataset, you would not know very much **about it**.

--

* We need to **summarize** the data for us to learn from it.

--

* In general, we can compute summary statistics, or visualize the data with plots.

--

* Let's start with some statistics first!

--

* Let's look at two features: *central tendency* and *spread*.

---

# Central Tendency



1. `mean(x)`: the average of all values in `x`.

--

1. `median`: the value `\(x_j\)` below and above which 50% of the values in `x` lie.

--


```r
x &lt;- c(1,2,2,2,2,100)
mean(x)
```

```
## [1] 18.16667
```

```r
mean(x) == sum(x) / length(x)
```

```
## [1] TRUE
```

```r
median(x)
```

```
## [1] 2
```


---

# Spread


* Another interesting feature is how much a variable is *spread out* about it's center (mean or median).

--

* The *variance* is such a measure.
    
    ```r
    var(x)
    ```
    
    ```
    ## [1] 1607.367
    ```
    
    ```r
    all.equal(var(x), sum((x - mean(x))^2) / (length(x)-1))
    ```
    
    ```
    ## [1] TRUE
    ```
* Similarly, the `range` is
    
    ```r
    range(x)
    ```
    
    ```
    ## [1]   1 100
    ```

---

# The `table` function

* `table(x)` is a useful function that counts the occurence of each unique value in `x`:
    
    ```r
    table(x)
    ```
    
    ```
    ## x
    ##   1   2 100 
    ##   1   4   1
    ```
    
    ```r
    table(mpg$trans)
    ```
    
    ```
    ## 
    ##   auto(av)   auto(l3)   auto(l4)   auto(l5)   auto(l6)   auto(s4) 
    ##          5          2         83         39          6          3 
    ##   auto(s5)   auto(s6) manual(m5) manual(m6) 
    ##          3         16         58         19
    ```

---

# Crosstables


* Given two vectors, `table` produces a contingency table:
    
    ```r
    table(mpg$trans,mpg$drv)
    ```
    
    ```
    ##             
    ##               4  f  r
    ##   auto(av)    0  5  0
    ##   auto(l3)    0  2  0
    ##   auto(l4)   34 37 12
    ##   auto(l5)   29  8  2
    ##   auto(l6)    2  2  2
    ##   auto(s4)    2  1  0
    ##   auto(s5)    1  2  0
    ##   auto(s6)    7  8  1
    ##   manual(m5) 21 33  4
    ##   manual(m6)  7  8  4
    ```

--

* with `prop.table`, we can get proportions:
    
    ```r
    prop.table(table(mpg$trans,mpg$drv),margin=2)
    ```

---
layout: false
class: title-slide-section-red, middle

# Plotting



---
layout: true

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/ScPo-shield.png" style="height: 60px;"/&gt;&lt;/div&gt; 

---

# Plotting


* `R` base plotting is fairly good.

* There is an extremely powerful alternative in package `ggplot2`. We'll see both.

* First example: *histograms*. A histogram counts how many obserations fall within a certain bin.

---

# Histogram


```r
hist(mpg$cty)
```

&lt;img src="chapter2_files/figure-html/unnamed-chunk-11-1.svg" style="display: block; margin: auto;" /&gt;

---

# A Nicer Histogram



```r
hist(mpg$cty, xlab   = "Miles Per Gallon (City)", main   = "Histogram of MPG (City)", breaks = 12, col = "red",border = "blue")
```

&lt;img src="chapter2_files/figure-html/unnamed-chunk-12-1.svg" style="display: block; margin: auto;" /&gt;

---

# Looking for Outliers: Boxplots

* It's good to know if a variable has *outliers*, i.e. values much more extreme than the mass of all values.
&lt;img src="chapter2_files/figure-html/unnamed-chunk-13-1.svg" style="display: block; margin: auto;" /&gt;

---

# Scatter Plots

* Two variables `\(x\)` and `\(y\)`

--

* Natural to ask: How often do certain pairs of `\((x_i,y_i)\)` occur?
    
    ```r
    head(mpg[,c("hwy","displ")])
    ```
    
    ```
    ##   hwy displ
    ## 1  29   1.8
    ## 2  29   1.8
    ## 3  31   2.0
    ## 4  30   2.0
    ## 5  26   2.8
    ## 6  26   2.8
    ```
* That's what a scatter plots shows.

---

# Scatter Plots


```r
plot(hwy ~ displ, data = mpg)
```

&lt;img src="chapter2_files/figure-html/unnamed-chunk-15-1.svg" style="display: block; margin: auto;" /&gt;

---
class: inverse, middle


# It's Tutorial Time!

---

# Tutorial Chapter 2

Time for our first tutorial!! Type this into your `RStudio` console:


```r
library(ScPoEconometrics)
runTutorial('chapter2')
```

If you have trouble with the interactive doc, try this version (no interactive content):


```r
ScPoEconometrics::runTutorial('chapter2-script')
```

---

# How are x and y related? Covariance.

.pull-left[
&lt;img src="chapter2_files/figure-html/x-y-corr-1.svg" style="display: block; margin: auto;" /&gt;
]

.pull-right[
&lt;br&gt;&lt;br&gt;&lt;br&gt;
* This is the [relevant section in the book](https://scpoecon.github.io/ScPoEconometrics/sum.html#summarize-two).

* This is **mandatory** reading.

]

---
class: inverse

# Correlation App


```r
library(ScPoEconometrics)
runTutorial('correlation')
```


---
class: title-slide-final, middle
background-image: url(../img/logo/ScPo-econ.png)
background-size: 250px
background-position: 9% 19%

# END




|                                                                                                            |                                   |
| :--------------------------------------------------------------------------------------------------------- | :-------------------------------- |
| &lt;a href="mailto:florian.oswald@sciencespo.fr"&gt;.ScPored[&lt;i class="fa fa-paper-plane fa-fw"&gt;&lt;/i&gt;]               | florian.oswald@sciencespo.fr       |
| &lt;a href="https://github.com/ScPoEcon/ScPoEconometrics-Slides"&gt;.ScPored[&lt;i class="fa fa-link fa-fw"&gt;&lt;/i&gt;] | Slides |
| &lt;a href="https://scpoecon.github.io/ScPoEconometrics"&gt;.ScPored[&lt;i class="fa fa-link fa-fw"&gt;&lt;/i&gt;] | Book |
| &lt;a href="http://twitter.com/ScPoEcon"&gt;.ScPored[&lt;i class="fa fa-twitter fa-fw"&gt;&lt;/i&gt;]                          | @ScPoEcon                         |
| &lt;a href="http://github.com/ScPoEcon"&gt;.ScPored[&lt;i class="fa fa-github fa-fw"&gt;&lt;/i&gt;]                          | @ScPoEcon                       |
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="../js/ru_xaringan.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
